CREATE EXTENSION popcount;

SELECT popcountIntr(15::bit(4));
SELECT popcountIntr(7::bit(4));

SELECT popcountIntr(15::bit(8));
SELECT popcountIntr(7::bit(8));

SELECT popcountIntr(15::bit(12));
SELECT popcountIntr(7::bit(12));

SELECT popcountIntr(15::bit(32));
SELECT popcountIntr(7::bit(32));

SELECT popcountIntr(30::bit(32));
SELECT popcountIntr(127::bit(32));

SELECT popcountIntr(b'10101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010101010101010110101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010101010101010110101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010101010101010110101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010101010101010110101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010');

SELECT sum(popcountIntr(x::bit(512))) from generate_series(1,1000000) x;
SELECT sum(popcountIntr(x::bit(500))) from generate_series(1,1000000) x;

SELECT popcountIntrL(15::bit(4));
SELECT popcountIntrL(7::bit(4));

SELECT popcountIntrL(15::bit(8));
SELECT popcountIntrL(7::bit(8));

SELECT popcountIntrL(15::bit(12));
SELECT popcountIntrL(7::bit(12));

SELECT popcountIntrL(15::bit(32));
SELECT popcountIntrL(7::bit(32));

SELECT popcountIntrL(30::bit(32));
SELECT popcountIntrL(127::bit(32));

SELECT popcountIntrL(b'10101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010101010101010110101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010101010101010110101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010101010101010110101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010101010101010110101010101010101010101010101010101101010101010101010101010101010101011010101010101010101010');

SELECT sum(popcountIntrL(x::bit(512))) from generate_series(1,1000000) x;
SELECT sum(popcountIntrL(x::bit(500))) from generate_series(1,1000000) x;
